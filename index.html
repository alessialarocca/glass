<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
	<title>prova 7</title>
	<link rel="stylesheet" href="main.css">
</head>
<body>
   <div>
		<a class="button" href="#"> indice </a>
	</div>


    <p class="titolo">
		glass
	</p>

    <p class="frase">
		“Lascia parlare il tuo cuore,<br> interroga i volti,<br> non ascoltare le lingue...”
	</p>

    <div class="contenitore">
		<div class="filtro">
			<img src="assets/filtro_0.png" alt="">
		</div>
       
		
	</div>
    <div class="interfaccia">

		

		<label for="#input-filtro"></label>
		<input id="input-filtro" type="range" step="1" value="2" min="0" max="2">




	</div>
	
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
	<script>

        document.querySelector("#input-filtro").addEventListener("input", function (e) {
			const v = e.target.value
			document.querySelector(".filtro img").src = "assets/filtro_" + v + ".png"
			
		})


let vid;

function setup() {
  createCanvas(600, 600, WEBGL);
  vid = createCapture(VIDEO)
  vid.hide()
  angleMode(DEGREES)
}

function draw() {
  
  background(223,223,223);

  //caleidoscopio
  for (angle = 0; angle < 360; angle += 60) {
    textureMode(NORMAL);
    let r = 300
    x = r * cos(angle)
    y = r * sin(angle)
    x2 = r * cos(60 + angle)
    y2 = r * sin(60 + angle)
    texture(vid)
    beginShape(TRIANGLES);
    vertex(0, 0, 0, 0);
    vertex(x, y, 0, 1);
    vertex(x2, y2, 1, 1);
    endShape()
    push()
    noStroke()
    fill(angle/2,angle)    
  }
   /*
    //filtro
    vid.loadPixels()

for (let j=0; j<vid.height; j++) {
    for (let i=0; i<vid.width; i++) {
        const idx = (i + j * vid.width) * 4
        const r = vid.pixels[idx + 0]
        const g = vid.pixels[idx + 1]
        const b = vid.pixels[idx + 2]
        vid.pixels[idx + 0] = g
		vid.pixels[idx + 1] = b
		vid.pixels[idx + 2] = r
    }
}
vid.updatePixels()*/
  
  
}

	</script>
	
</body>
</html>